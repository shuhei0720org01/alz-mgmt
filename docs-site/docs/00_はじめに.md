# 00. はじめに - ランディングゾーンの全体像 ✈️


## 何を作るのか？🛠️

---

この教科書では、**Azure Landing Zones**（アジュール・ランディングゾーンズ）という、  
企業向けのAzure環境を構築するためのTerraformコードを作っていきます。

「Landing Zone」は飛行機の着陸帯って意味です🛬。
実際にイメージを照らし合わせ当て見ましょう。

飛行機が安全に着陸するためには、滑走路だけじゃなくて：

- 管制塔🗼（誰がどこに着陸していいか管理）
- 誘導灯💡（どこに行けばいいか案内）
- セキュリティゲート🔐（危険なものは入れない）
- 整備場🔧（メンテナンス）

これらが全部揃ってますよね。

Azure Landing Zonesも同じです。  
アプリケーションを「安全に着陸させる」ための環境を整えます。

さあ、ここからLanding Zonesを理解する長い旅路の始まりです🛬

![alt text](./img/image57.png)

## 参考ドキュメント

この教科書では、以下の公式ドキュメントを参考にしています。

https://learn.microsoft.com/ja-jp/azure/cloud-adoption-framework/ready/landing-zone/

上級者でも参考になるので、おすすめです！この教科書が終わってからでも読んでみてください！

特に「設計領域」のところがおすすめです✨

---

## 具体的に何ができるの？

ランディングゾーンでは、Azureにこんな環境ができます：

### 1. 組織構造（管理グループ）
```text title="管理グループの階層構造"
あなたの会社
├── プラットフォーム（基盤チーム）
│   ├── ネットワーク担当
│   ├── 監視担当
│   └── ID管理担当
├── アプリケーション（開発チーム）
│   ├── 本番環境
│   └── 開発環境
└── サンドボックス（実験用）
```

---

会社の組織図みたいに、Azureのリソースも階層構造で管理できます🏢。

### 2. ネットワーク（2拠点構成）

=== "東日本の拠点（メイン）"

    - Azure Firewall🧱: インターネットとの出入り口を守る門番
    - Bastion🛡️: サーバーに安全にログインするための専用ゲート
    - VPN Gateway🔗: 会社のオフィスと接続
    - Express Route Gateway🚄: 専用線で接続（オプション）
    - Private DNS🔎: 内部の名前解決

=== "西日本の拠点（バックアップ）"

    - 東日本と同じ構成
    - 災害時の切り替え先🌀

---

### 3. 監視・管理システム🔍
- Log Analytics📊: 全てのログを一箇所に集約
- Automation Account🤖: 定期的な作業を自動化
- Data Collection Rules📋: どのログを集めるか定義

---

### 4. セキュリティポリシー（約200個！）🛡️
例えば：

- 「インターネットに直接繋がるリソースは作っちゃダメ」
- 「暗号化されてない通信は禁止」
- 「削除保護をONにしなさい」

などなど、会社のルールを自動で強制できます。

---

## なぜこんな複雑なの？

「こんなに複雑にする必要ある？」って思いますよね🤔。

でも、企業でAzureを使うとき、こんな問題が起きるんです：

---

### 問題1: 野良リソース🐾
開発者が勝手にリソース作って、誰も管理してない。  
→ **管理グループ+ポリシーで制御**

---

### 問題2: セキュリティ事故🚨
Public IPを直接インターネットに晒して攻撃される。  
→ **Firewallで全ての通信を監視**

---

### 問題3: ログがバラバラ📉
どこで何が起きたかわからない。  
→ **Log Analyticsで全部集約**

---

### 問題4: 災害時に止まる🌪️
東日本のデータセンターがダウンしたらサービス停止。  
→ **西日本にも同じ構成を用意**

---

### 問題5: 誰がどこまでできるか不明確❓
権限管理がグチャグチャ。  
→ **管理グループで階層的に権限管理**

Landing Zonesは、これら全ての問題を一気に解決するための「基盤」なんです🚀。

---

## 実際に何が作られるか

ランディングゾーンのterraformでは、Azureにこれだけのリソースができます：

- リソースグループ: 約10個
- 仮想ネットワーク: 2個（東日本・西日本）
- Azure Firewall: 2個
- Bastion Host: 2個
- VPN Gateway: 2個（オプション）
- Express Route Gateway: 2個（オプション）
- Log Analytics ワークスペース: 1個
- Automation Account: 1個
- 管理グループ: 約10個
- ポリシー定義: 約200個
- ポリシーセット定義: 約40個
- ポリシー割り当て: 約50個
- カスタムロール定義: 数個

合計で、500個以上のリソースが作られます。  
これを手作業でやったら...考えたくないですねw😱

---


## 学習のロードマップ

!!! info "6ステップで理解する" 🏁
    このプロジェクトを理解するための順序：

    ### ステップ1: 全体像を掴む（今ここ）
    - このファイルを読む
    - 何ができるのか理解する
    - なぜ必要なのか理解する

    ### ステップ2: 基礎を学ぶ
    - Terraformの基本
    - Azureの基本概念
    - Landing Zonesの設計思想

    ### ステップ3: まずはやってみる
    - 公式CAFのランディングゾーンアーキテクチャをデプロイ
    - Azureポータルでデプロイ確認
    - カスタマイズして理解を深める

    ### ステップ4: 運用を理解する
    - terraformの運用を理解
    - 運用をやってみる

    ### ステップ5: コードの理解
    - コードにディープダイブして深く理解してみる。
    - さらにカスタマイズしてみる。

---

## よくある勘違い

!!! warning "これらは誤解です" ⚠️
    ### 勘違い1: 「全部理解しないと使えない」
    → **NO!** まずは設定ファイルだけ理解すれば使えます。  
    深く理解するのは後からでOK。

    ### 勘違い2: 「Azureの専門家じゃないとダメ」
    → **NO!** このコースで必要な知識は全部教えます。

    ### 勘違い3: 「一度作ったら変更できない」
    → **NO!** Terraformなので、設定変えて再実行すれば更新されます。

    ### 勘違い4: 「本番環境で使っちゃダメ」
    → **NO!** Microsoftが推奨する構成なので本番でも使えます。むしろCAFで推奨されています。
    ただし、最初は検証環境で試してね。

---

## 練習問題📝

### 問題1
このプロジェクトで構築される主要な3つのコンポーネントを挙げてください。

### 問題2
なぜこのプロジェクトではTerraformを使っているのですか？


---

## 練習問題の答え💡

### 答え1
主要な3つのコンポーネント：

1. **管理グループ**: サブスクリプションを階層的に管理し、ポリシーを一括適用
2. **ネットワーク**: Hub-and-Spoke構成でセキュアな通信基盤を構築
3. **管理リソース**: Log Analytics、監視、セキュリティ管理

### 答え2
Terraformを使う理由：

- IaC（Infrastructure as Code）: インフラをコードで管理できる
- 再現性: 同じコードから何度でも同じ環境を構築できる
- バージョン管理: Gitで変更履歴を追跡できる
- マルチクラウド対応: Azure以外のクラウドでも使える知識
- モジュール化: 再利用可能な部品として管理できる


---

## 次のステップ⏭️

全体像は掴めましたか？

次は[01_基礎知識.md](./01_基礎知識.md)に進んで、  
Terraform・Azure・Landing Zonesの基礎を学びましょう。

「もう知ってるよ」って人は飛ばしてもOK。  
でも念のため目を通すことをオススメします。

---

**所要時間**: 10分 ⏰  
**難易度**: ★☆☆☆☆  
**次**: [01_基礎知識.md](./01_基礎知識.md)➡️
