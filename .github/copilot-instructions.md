# GitHub Copilot Instructions
---

## 🚀 新規大規模プロジェクト：教科書再構成（実践・運用編の全面改訂）

**プロジェクト開始日**: 2026年1月20日

**目的**: Azure Landing Zones公式Bootstrap手順に基づいた実践・運用編の全面改訂

### プロジェクト概要

**前提サイト**: https://azure.github.io/Azure-Landing-Zones/bootstrap/

**現在の構成**（mkdocs.yml）:
```yaml
nav:
  - 基礎編: Chapter 00-02
  - 設定編: Chapter 03-05
  - モジュール編: Chapter 06-11
  - 実践編: Chapter 12-13
  - 運用編: Chapter 14-17
```

**改訂対象**:
- ✅ **保持**: Chapter 00-11（基礎編・設定編・モジュール編）
- 🔄 **全面改訂**: Chapter 12-17（実践編・運用編）

**新しい構成**:

#### Chapter 12: GitHub Actions - CI/CDの基礎（全面改訂）
既存: 1327行（GitHub Actions解説、OIDC、ワークフロー）
新規内容:
- Part 1: GitHub Actions基礎
- Part 2: OIDC認証の仕組み
- Part 3: 再利用可能ワークフローの理解
- Part 4: CI/CDパイプラインの実装

#### Chapter 13: デプロイ手順 - Bootstrap実践（全面改訂）
既存: 1249行（デプロイ手順）
新規内容（Azure公式Bootstrap手順に完全準拠）:
- Part 1: 前提条件の準備（Azure/GitHub）
- Part 2: Starter Moduleの選択
- Part 3: Phase 1 - Bootstrapデプロイ
- Part 4: Phase 2 - Landing Zonesデプロイ
- Part 5: デプロイ後の検証

#### Chapter 14: トラブルシューティング（全面改訂）
既存: 1206行（エラー対処法）
新規内容:
- Part 1: よくあるエラーと対処法
- Part 2: デプロイ失敗時の対処
- Part 3: State管理のトラブル
- Part 4: 認証エラーの解決

#### Chapter 15: カスタマイズ（全面改訂）
新規内容:
- Part 1: tfvarsのカスタマイズ
- Part 2: 独自ポリシーの追加
- Part 3: ネットワーク構成の変更
- Part 4: 管理リソースの拡張

#### Chapter 16: ベストプラクティス（全面改訂）
新規内容:
- Part 1: コード品質の保ち方
- Part 2: セキュリティ設定
- Part 3: 変更管理のフロー
- Part 4: チーム開発のルール

#### Chapter 17: FAQ（全面改訂）
新規内容:
- Part 1: よくある質問
- Part 2: アーキテクチャ選択
- Part 3: 運用上の疑問
- Part 4: パフォーマンス・コスト

**口調**: カジュアル敬語調（Chapter 01準拠）を厳守

### 進捗管理

**Phase 1: 計画・調査**
- ⏳ Azure Landing Zones公式Bootstrapサイトの詳細調査
- ⏳ 既存Chapter 12-17の内容分析
- ⏳ 新章構成の詳細設計
- ⏳ Bootstrap手順のTerraformフローの理解

**Phase 2: Chapter 12（GitHub Actions）全面改訂**
- ⏳ Part 1: GitHub Actions基礎
- ⏳ Part 2: OIDC認証の仕組み
- ⏳ Part 3: 再利用可能ワークフロー
- ⏳ Part 4: CI/CDパイプライン実装

**Phase 3: Chapter 13（デプロイ手順）全面改訂**
- ⏳ Part 1: 前提条件の準備
- ⏳ Part 2: Starter Module選択
- ⏳ Part 3: Phase 1 - Bootstrap
- ⏳ Part 4: Phase 2 - Landing Zones
- ⏳ Part 5: デプロイ後の検証

**Phase 4: Chapter 14-17（運用編）全面改訂**
- ⏳ Chapter 14: トラブルシューティング
- ⏳ Chapter 15: カスタマイズ
- ⏳ Chapter 16: ベストプラクティス
- ⏳ Chapter 17: FAQ

**Phase 5: 統合・テスト**
- ⏳ 全章のビルドテスト
- ⏳ リンク整合性チェック
- ⏳ ナビゲーション構成の最適化

### 制約事項
- 既存Chapter 00-11は一切変更しない
- Chapter 12-17は全面改訂（既存内容は参考にするが、ゼロから書き直し）
- Material for MkDocsデザイン要素を使用
- コードタイトル、タブ、アドモニションで見やすく
- 文章は「カジュアル敬語調」で統一

### 参考資料
- Azure公式: https://azure.github.io/Azure-Landing-Zones/bootstrap/
- 既存Chapter 01: 口調の正解例
- 既存Chapter 12-17: 既存内容（参考程度）

---

## 追加作業 - Markdown書式修正:
- 日付: 2026年1月19日
- PR #58: markdown formatting修正（リストと表の空行追加）
- 修正箇所: 6箇所（Chapter 03×3、06×1、08×1、16×1）
- 問題: ヘッダー（`**xxx**:`）の直後にリスト/表を書くとレンダリング不具合
- 解決: ヘッダーとリスト/表の間に空行を追加
- 文章変更なし（空行追加のみ）
- ビルドテスト成功

**教科書の内容**:
- 基礎編（00-02）: Azure Landing Zonesの全体像、Terraform基礎、プロジェクト構造
- 設定編（03-06）: tfvars完全解説、変数定義、ローカル変数、テンプレート処理
- リソース作成編（07-11）: RG、管理グループ、ポリシー、管理リソース、Hub-and-Spoke、Virtual WAN
- 運用編（12-14）: GitHub Actions、デプロイ手順、トラブルシューティング
- 応用編（15-17）: カスタマイズ、ベストプラクティス、FAQ

**デザイン装飾のルール**:
- ✅ 使用する要素: タブ (`=== "タイトル"`)、アドモニション (`!!! warning/info/success/tip`)、コードタイトル (```lang title="xxx")
- ❌ 使用しない: カード型レイアウト、アイコン記法 (`:material-xxx:`)

### 🚨🚨🚨 装飾時の絶対厳守ルール（違反したら即終了） 🚨🚨🚨

**以下のルールを1つでも破ったら作業中止。絶対に守ること。**

1. **文章は一言一句変更しない**
   - 既存の文章を書き換えない
   - 文章を追加しない
   - 文章を削除しない
   - 文章を移動しない
   - 文章の順序を変えない

2. **追加するのはマークアップ記号だけ**
   - コードブロックに `title="説明"` を追加するだけ
   - 既存のコードブロックを ` ``` ` から ` ```language title="xxx"` に変更するだけ
   - 既存のコード例を `===` でタブ化する際も、コード内容は絶対変更しない
   - 既存のリストや段落を `!!!` でアドモニション化する際も、文章内容は絶対変更しない

3. **やってはいけないこと（厳禁）**
   - ❌ 文章をアドモニションの中に移動する
   - ❌ アドモニションのタイトルに新しい文章を書く
   - ❌ 既存の文章を「わかりやすく」書き直す
   - ❌ 説明を追加する
   - ❌ 表のセルの中身を変更する
   - ❌ リストの項目を変更する
   - ❌ コード例の中身を変更する

4. **正しい装飾の例**
   ```markdown
   <!-- 元の文章 -->
   これは例です：
   ```hcl
   code = "example"
   ```
   
   <!-- 正しい装飾（コードタイトルだけ追加） -->
   これは例です：
   ```hcl title="設定例"
   code = "example"
   ```
   ```

5. **間違った装飾の例（絶対NG）**
   ```markdown
   <!-- 元の文章 -->
   これは例です：
   ```hcl
   code = "example"
   ```
   
   <!-- ❌ NG：文章を変更 -->
   !!! info "例の説明"
       これは設定の例です：
       ```hcl title="設定例"
       code = "example"
       ```
   ```

**装飾前に必ず確認すること**:
- [ ] 元のファイルの文章を一言一句そのまま残しているか
- [ ] 追加したのはマークアップ記号（` ``` title=`、`===`、`!!!`）だけか
- [ ] git diff で文章の変更がないことを確認したか

**作業方針**:
- 1章ずつ完全に装飾してからコミット
- 装飾完了後、必ずinstructionファイルを更新
- ビルド確認してからPR作成・マージ

---

## ドキュメント作成時の絶対ルール

### 🚨 口調ルール（絶対に守ること）🚨

**このプロジェクトのドキュメントは「カジュアル敬語調」で書く。Chapter 01の口調が正解。**

「です・ます」を使うけど、友達に話しかけるような親しみやすさもある口調。
AIっぽい硬い説明文ではなく、教えるのが好きな先輩が後輩に説明する感じ。

#### ✅ 使うべき表現（Chapter 01スタイル）
- 「〜です」「〜ます」「〜ました」（基本の敬語）
- 「〜してください」「〜しましょう」（柔らかい依頼・提案）
- 「〜ですよね」「〜ですか？」（親しみのある問いかけ）
- 「見てみましょう」「試してみてください」（一緒に進む感じ）
- 「わかりますか？」「理解できましたか？」（確認）
- 「簡単ですよね」「便利ですよね」（共感）

#### ❌ 避けるべき表現
- 「〜になります」（コンビニ敬語）
- 「〜いたします」「〜させていただきます」（過剰敬語）
- 「ご確認ください」「ご覧ください」（硬すぎる）
- 「〜であろう」「〜である」（論文調）
- 「〜だね」「〜だよ」「〜じゃん」（タメ口すぎる）
- 「〜しちゃう」「〜してる」（カジュアルすぎる）

### 具体例

#### ✅ 良い例（Chapter 01スタイル）
```markdown
変数を定義する際は、以下のように記述します。
このコードは、文字列型の変数を定義しています。
型を指定することで、不正な値の代入を防ぐことができます。

わかりますか？では次に進みましょう。
```

#### ❌ ダメな例1（硬すぎる）
```markdown
変数を定義する際は、以下のように記述することになります。
当該コードにおきましては、文字列型の変数を定義しております。
型を指定することで、不正な値の代入を防止することが可能となります。
```

#### ❌ ダメな例2（カジュアルすぎる）
```markdown
変数ってこう書くんだ。
これ、文字列型の変数だね。
型を指定しとけば、変な値が入るのを防げる。

わかる？じゃあ次いこう。
```

### よく使うフレーズ
- 「見てみましょう」「確認してみましょう」
- 「〜ですよね」「〜ですね」
- 「わかりますか？」「理解できましたか？」
- 「試してみてください」「実行してみましょう」
- 「簡単ですよね」「便利ですよね」
- 「次に進みましょう」「詳しく見ていきます」

### 参考ファイル（この口調が正解）
- `docs_new/01_基礎知識.md` ← **これが正解の口調！**
- `docs_new/02_プロジェクト構造.md`

**Chapter 01の口調を真似て書く。**

---

## チェックリスト

ドキュメント作成時は必ず確認：

- [ ] 「です・ます」を適切に使っている
- [ ] 「〜になります」を使っていない（コンビニ敬語NG）
- [ ] 硬すぎる敬語（ご確認くださいetc.）になっていない
- [ ] カジュアルすぎる（〜だね、〜だよ）になっていない
- [ ] Chapter 01のような親しみやすい敬語調になっている
- [ ] 読者に語りかける口調（〜ですよね、わかりますか？）を使っている

---

## その他のルール

- 技術的な正確さを保つ
- コード例は実際に動くものを記載
- 複雑な概念は噛み砕いて説明
- 例え話を使って理解しやすくする
- 「わかる？」「見て」など読者に語りかける
- 作業後にこのファイルの更新箇所があれば必ず更新すること
